general:
  artifacts:
    - "./ci/output"

machine:
  python:
    version: 2.7.11
  services:
    - docker

dependencies:
  override:
    - mkdir ./ci/output
    - bash ci/install.sh
    - python ci/prepare.py


compile:
  override:
    - bash ci/build_images.sh:
        parallel: true


test:
  override:
    - bash ci/test_images.sh:
        parallel: true


deployment:
  dockerhub:
    commands:
      - bash ci/push_dockerhub.sh
